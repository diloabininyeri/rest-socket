<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>

<script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/4.0.1/socket.io.min.js"
        integrity="sha512-eVL5Lb9al9FzgR63gDs1MxcDS2wFu3loYAgjIH0+Hg38tCS8Ag62dwKyH+wzDb+QauDpEZjXbMn11blw8cbTJQ=="
        crossorigin="anonymous"></script>

<script>

    const token = "$2y$10$.5iuqFaSaMQrPi/rMmUVjOJg/Ip6gEI5Jzhux.tzfyUu2ZmPOAs2C";
    const uri = "172.16.45.131:3000"

    let socket = io(uri, {auth: {token: token}})

    socket.on('connect_error',(error)=>console.error(error))

    socket.on("notify", (a) => alert(JSON.stringify(a)))


    function socket_emit(channel, json) {

        let query = new URLSearchParams(json).toString();
        fetch(`http://172.16.45.131:3000/${channel}/?${query}&token=${token}`, {
            method: 'POST', // or 'PUT'
            mode: 'no-cors',
            headers: {
                'Content-Type': 'application/json',
            },
            body: JSON.stringify(json)
        });
    }

    socket_emit("asd",{name:999999999})

</script>
<body>

<input type="text" id="isim">
<button onclick="socket_emit('notify',{value:Math.random()})">isim al</button>
</body>
</html>